(()=>{"use strict";const o=function(a){return"string"!=typeof a||""===a?(console.error("The namespace must be a non-empty string."),!1):!!/^[a-zA-Z][a-zA-Z0-9_.\-\/]*$/.test(a)||(console.error("The namespace can only contain numbers, letters, dashes, periods, underscores and slashes."),!1)},e=function(a){return"string"!=typeof a||""===a?(console.error("The hook name must be a non-empty string."),!1):/^__/.test(a)?(console.error("The hook name cannot begin with `__`."),!1):!!/^[a-zA-Z][a-zA-Z0-9_.-]*$/.test(a)||(console.error("The hook name can only contain numbers, letters, dashes, periods and underscores."),!1)},f=function(a,b){return function(c,g,h,d=10){const f=a[b];if(!e(c))return;if(!o(g))return;if("function"!=typeof h)return void console.error("The hook callback must be a function.");if("number"!=typeof d)return void console.error("If specified, the hook priority must be a number.");const i={callback:h,priority:d,namespace:g};if(f[c]){const b=f[c].handlers;let a;for(a=b.length;a>0&&!(d>=b[a-1].priority);a--);a===b.length?b[a]=i:b.splice(a,0,i),f.__current.forEach(b=>{b.name===c&&b.currentIndex>=a&&b.currentIndex++})}else f[c]={handlers:[i],runs:0};"hookAdded"!==c&&a.doAction("hookAdded",c,g,h,d)}},c=function(a,c,b=!1){return function(d,g){const f=a[c];if(!e(d))return;if(!b&&!o(g))return;if(!f[d])return 0;let h=0;if(b)h=f[d].handlers.length,f[d]={runs:f[d].runs,handlers:[]};else{const a=f[d].handlers;for(let b=a.length-1;b>=0;b--)a[b].namespace===g&&(a.splice(b,1),h++,f.__current.forEach(a=>{a.name===d&&a.currentIndex>=b&&a.currentIndex--}))}return"hookRemoved"!==d&&a.doAction("hookRemoved",d,g),h}},g=function(a,b){return function(c,e){const d=a[b];return void 0!==e?c in d&&d[c].handlers.some(a=>a.namespace===e):c in d}},l=function(b,c,a=!1){return function(e,...f){const d=b[c];d[e]||(d[e]={handlers:[],runs:0}),d[e].runs++;const g=d[e].handlers;if(!g||!g.length)return a?f[0]:void 0;const h={name:e,currentIndex:0};for(d.__current.push(h);h.currentIndex<g.length;){const b=g[h.currentIndex].callback.apply(null,f);a&&(f[0]=b),h.currentIndex++}return d.__current.pop(),a?f[0]:void 0}},h=function(a,b){return function(){var c;const d=a[b];return null!==(c=d.__current[d.__current.length-1]?.name)&&void 0!==c?c:null}},n=function(a,b){return function(d){const c=a[b];return void 0===d?void 0!==c.__current[0]:!!c.__current[0]&&d===c.__current[0].name}},i=function(a,b){return function(c){const d=a[b];if(e(c))return d[c]&&d[c].runs?d[c].runs:0}};class r{constructor(){this.actions=Object.create(null),this.actions.__current=[],this.filters=Object.create(null),this.filters.__current=[],this.addAction=f(this,"actions"),this.addFilter=f(this,"filters"),this.removeAction=c(this,"actions"),this.removeFilter=c(this,"filters"),this.hasAction=g(this,"actions"),this.hasFilter=g(this,"filters"),this.removeAllActions=c(this,"actions",!0),this.removeAllFilters=c(this,"filters",!0),this.doAction=l(this,"actions"),this.applyFilters=l(this,"filters",!0),this.currentAction=h(this,"actions"),this.currentFilter=h(this,"filters"),this.doingAction=n(this,"actions"),this.doingFilter=n(this,"filters"),this.didAction=i(this,"actions"),this.didFilter=i(this,"filters")}}const k=function(){return new r},s=k(),{addAction:G,addFilter:E,removeAction:H,removeFilter:t,hasAction:J,hasFilter:I,removeAllActions:K,removeAllFilters:F,doAction:u,applyFilters:v,currentAction:w,currentFilter:x,doingAction:y,doingFilter:z,didAction:A,didFilter:B,actions:C,filters:D}=s;function b(a){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},b(a)}function p(a){return function(a){if(Array.isArray(a))return d(a)}(a)||function(a){if("undefined"!=typeof Symbol&&null!=a[Symbol.iterator]||null!=a["@@iterator"])return Array.from(a)}(a)||m(a)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(a,c){if(a){if("string"==typeof a)return d(a,c);var b=Object.prototype.toString.call(a).slice(8,-1);return"Object"===b&&a.constructor&&(b=a.constructor.name),"Map"===b||"Set"===b?Array.from(a):"Arguments"===b||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b)?d(a,c):void 0}}function d(c,a){(null==a||a>c.length)&&(a=c.length);for(var b=0,d=new Array(a);b<a;b++)d[b]=c[b];return d}function j(d,c){for(var b=0,a;b<c.length;b++)a=c[b],a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(d,q(a.key),a)}function q(c){var a=function(a,e){var c,d;if("object"!=b(a)||!a)return a;if(c=a[Symbol.toPrimitive],void 0!==c){if(d=c.call(a,e||"default"),"object"!=b(d))return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(a)}(c,"string");return"symbol"==b(a)?a:String(a)}var a=new(function(){function b(){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b),this.formSelector="form, div.fl-login-form, section.cwginstock-subscribe-form, div.sdm_download_item, .gform_editor, #nf-builder, .wpforms-captcha-preview",this.submitButtonSelector='*[type="submit"]:not(.quform-default-submit):not(.nf-element), #check_config, a.fl-button span, button[type="button"].ff-btn, a.et_pb_newsletter_button.et_pb_button, .forminator-button-submit, .frm_button_submit, a.sdm_download',this.foundForms=[],this.params=null,this.observing=!1,this.darkElement=null,this.darkClass=null,this.hooks=k(),this.callback=this.callback.bind(this),this.validate=this.validate.bind(this)}var a,c,d;return a=b,(c=[{key:"generateID",value:function(){var a=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};return a()+"-"+a()+"-"+a()+"-"+a()}},{key:"getFoundFormById",value:function(a){return this.foundForms.filter(function(b){return a===b.hCaptchaId})[0]}},{key:"getWidgetId",value:function(b){var a,c,d;return void 0===b?"":(c=b.getElementsByClassName("h-captcha")[0],void 0===c)?"":(d=c.getElementsByTagName("iframe")[0],void 0===d?"":null!==(a=d.dataset.hcaptchaWidgetId)&&void 0!==a?a:"")}},{key:"reset",value:function(b){var a=this.getWidgetId(b);a&&hcaptcha.reset(a)}},{key:"isSameOrDescendant",value:function(b,c){for(var a=c;a;){if(a===b)return!0;a=a.parentElement}return!1}},{key:"validate",value:function(a){var b=a.currentTarget.closest(this.formSelector),c=this.getFoundFormById(b.dataset.hCaptchaId).submitButtonElement,d,e;this.isSameOrDescendant(c,a.target)&&(a.preventDefault(),a.stopPropagation(),this.currentForm={formElement:b,submitButtonElement:c},d=this.getWidgetId(b),d&&(e=b.querySelector(".h-captcha iframe").dataset.hcaptchaResponse,""===e?hcaptcha.execute(d):this.callback(e)))}},{key:"isValidated",value:function(){return void 0!==this.currentForm}},{key:"getForms",value:function(){return p(document.querySelectorAll(this.formSelector))}},{key:"getParams",value:function(){if(null!==this.params)return this.params;var a;try{a=JSON.parse(HCaptchaMainObject.params)}catch(b){a={}}return a.callback=this.callback,a}},{key:"setParams",value:function(a){this.params=a}},{key:"setDarkData",value:function(){var a={"twenty-twenty-one":{darkStyleId:"twenty-twenty-one-style-css",darkElement:document.body,darkClass:"is-dark-theme"},"wp-dark-mode":{darkStyleId:"wp-dark-mode-frontend-css",darkElement:document.documentElement,darkClass:"wp-dark-mode-active"},"droit-dark-mode":{darkStyleId:"dtdr-public-inline-css",darkElement:document.documentElement,darkClass:"drdt-dark-mode"}},b,d,c;a=this.hooks.applyFilters("hcaptcha.darkData",a);for(b=0,d=Object.values(a);b<d.length;b++)if(c=d[b],document.getElementById(c.darkStyleId))return this.darkElement=c.darkElement,void(this.darkClass=c.darkClass)}},{key:"observeDarkMode",value:function(){var a=this;this.observing||(this.observing=!0,"auto"!==this.getParams().theme)||(this.setDarkData(),this.darkElement&&this.darkClass&&new MutationObserver(function(d){var c,b=function(a,h){var b="undefined"!=typeof Symbol&&a[Symbol.iterator]||a["@@iterator"],d,e,f,g,c;if(!b){if(Array.isArray(a)||(b=m(a))||h&&a&&"number"==typeof a.length)return b&&(a=b),d=0,e=function(){},{s:e,n:function(){return d>=a.length?{done:!0}:{done:!1,value:a[d++]}},e:function(a){throw a},f:e};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return g=!0,c=!1,{s:function(){b=b.call(a)},n:function(){var a=b.next();return g=a.done,a},e:function(a){c=!0,f=a},f:function(){try{g||null==b.return||b.return()}finally{if(c)throw f}}}}(d),e;try{e=function(){var b=c.value.oldValue,d=a.darkElement.getAttribute("class");b=b?b.split(" "):[],(d=d?d.split(" "):[]).filter(function(a){return!b.includes(a)}).concat(b.filter(function(a){return!d.includes(a)})).includes(a.darkClass)&&a.bindEvents()};for(b.s();!(c=b.n()).done;)e()}catch(a){b.e(a)}finally{b.f()}}).observe(this.darkElement,{attributes:!0,attributeOldValue:!0}))}},{key:"callback",value:function(a){document.dispatchEvent(new CustomEvent("hCaptchaSubmitted",{detail:{token:a}}));var d=this.getParams(),b=document.querySelector('iframe[data-hcaptcha-response="'+a+'"]'),c=b?b.closest(".h-captcha"):null,e=c?c.dataset.force:null;("invisible"===d.size||"true"===e&&this.isValidated())&&this.submit()}},{key:"applyAutoTheme",value:function(a){if("auto"!==a.theme)return a;if(a.theme="light",!this.darkElement)return a;var b=this.darkElement.getAttribute("class");return(b=b||"").includes(this.darkClass)&&(a.theme="dark"),a}},{key:"render",value:function(a){this.observeDarkMode();var b=this.applyAutoTheme(this.getParams());hcaptcha.render(a,b)}},{key:"bindEvents",value:function(){var a=this;"undefined"!=typeof hcaptcha&&this.getForms().map(function(b){var c=b.querySelector(".h-captcha"),e,d,f;return null===c?b:c.classList.contains("hcaptcha-widget-id")?b:(e=c.querySelector("iframe"),null!==e&&e.remove(),a.render(c),"invisible"!==c.dataset.size&&"true"!==c.dataset.force)?b:(d=b.querySelectorAll(a.submitButtonSelector)[0],!d)?b:(f=a.generateID(),a.foundForms.push({hCaptchaId:f,submitButtonElement:d}),b.dataset.hCaptchaId=f,d.addEventListener("click",a.validate,!0),b)})}},{key:"submit",value:function(){var a=this.currentForm.formElement,b=this.currentForm.submitButtonElement,c=b.getAttribute("type");if(c=c?c.toLowerCase():"","form"!==a.tagName.toLowerCase()||"submit"!==c)return b.removeEventListener("click",this.validate,!0),void b.click();a.requestSubmit?a.requestSubmit(b):a.submit()}}])&&j(a.prototype,c),d&&j(a,d),Object.defineProperty(a,"prototype",{writable:!1}),b}());window.hCaptcha=a,window.hCaptchaGetWidgetId=function(b){a.getWidgetId(b)},window.hCaptchaReset=function(b){a.reset(b)},window.hCaptchaBindEvents=function(){a.bindEvents()},window.hCaptchaSubmit=function(){a.submit()},window.hCaptchaOnLoad=function(){window.hCaptchaBindEvents(),document.dispatchEvent(new CustomEvent("hCaptchaLoaded"))}})()